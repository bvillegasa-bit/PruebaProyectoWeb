<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Victoria Barrios, Natalia Mercado, BernabÃ© Villegas">
    <meta name="description" content="Panel de vendedor de EcoMarket para gestionar productos y ganancias.">
    <title>EcoMarket - Vendedor</title>
    <link rel="icon" type="image/png" href="../recursos/img/Logo.png">
    <link rel="stylesheet" href="../css/vendedor.css">
    <script src="../js/gestionarProducto.js"></script>
    <script src="../js/utilidades.js"></script>
    <script src="../js/producto.js"></script>
    <script src="../js/gestionarGanancias.js"></script>
    <script src="../js/ganancias.js"></script>
    <script src="../js/gestionarCompra.js"></script>
    <script src="../js/compra.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="logo">ðŸŒ¿ EcoMarket</div>

        <ul class="nav-links">
            <li><a href="./vistaVendedor.html">Inicio</a></li>
            <li><a href="./gestionCategorias.html">Gestionar Categorias</a></li>
            <li><a href="./gestionProductos.html">Gestionar Productos</a></li>
            <li><a href="./gestionGanancias.html">Gestionar Ganancias</a></li>
            <li><a href="../index.html">Cerrar SesiÃ³n</a></li>
        </ul>

        <div class="profile-icon">ðŸ‘¤</div>
    </nav>

    <section class="main">

        <div class="left-image">
            <img src="https://images.pexels.com/photos/3184192/pexels-photo-3184192.jpeg" alt="Vendedor trabajando">
        </div>

        <div class="right-panel">
            <h2 class="bienvenido">Bienvenido (a)</h2>

            <p class="texto">
                EcoMarket te permite gestionar tus productos de forma rÃ¡pida, 
                sencilla y con impacto positivo hacia el planeta.  
                Publica, edita y controla tus ventas desde un solo lugar.
            </p>
        </div>

    </section>

    <section class="stats">
        <div class="stat">
            <h3 id="productosPublicados"></h3>
            <p>Productos publicados</p>
        </div>
        <div class="stat">
            <h3 id="ventasMes"></h3>
            <p>Ventas este mes</p>
        </div>
        <div class="stat">
            <h3 id="gananciasTotales"></h3>
            <p>Ganancias totales</p>
        </div>
    </section>

    <section class="productos-vendedor">
        <h2>Productos</h2>
        <div id="productosGrid" class="productos-grid">

        </div>
    </section>

</div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            cargarProductosVendedor() 
        }) 

        function cargarProductosVendedor() {
            const productos = cargarProductos() 
            const ventasDelMes = obtenerCantidadVentasDelMes() 
            const gananciasTotales = calcularGananciasTotales() 
            const productosGrid = document.getElementById('productosGrid') 

            productos.forEach(producto => {
                const productoCard = document.createElement('div') 
                productoCard.classList.add('producto-card') 
                var imagen= crearImagen(producto.imagenProducto, producto.nombreProducto, 200, 200)
                
                var h3=  crearTagConTexto('h3', producto.nombreProducto)
                var p = crearTagConTexto('p', '$' + producto.precioProducto)
                adicionarTagAContenedor(imagen, productoCard)
                adicionarTagAContenedor(h3, productoCard)
                adicionarTagAContenedor(p, productoCard)
                adicionarTagAContenedor(productoCard, productosGrid)
            }) 
            document.getElementById('productosPublicados').textContent = productos.length 
            document.getElementById('ventasMes').textContent = ventasDelMes 
            document.getElementById('gananciasTotales').textContent = '$' + gananciasTotales 
        }

        function obtenerCantidadVentasDelMes() {
            var cargarVentas = cargarCompras() 
            var fechaActual = new Date() 
            var mesActual = fechaActual.getMonth() 
            var aÃ±oActual = fechaActual.getFullYear() 
            var contadorVentas = 0 
            cargarVentas.forEach(venta => {
                var fechaVenta = new Date(venta.fechaCompra) 
                if (fechaVenta.getMonth() === mesActual && fechaVenta.getFullYear() === aÃ±oActual) {
                    contadorVentas++ 
                }
            }) 
            return contadorVentas 
        }
        function calcularGananciasTotales() {
            var cargarVentas = cargarCompras() 
            var ganancias = 0 
            cargarVentas.forEach(venta => {
                ganancias += venta.totalCompra 
            }) 
            return ganancias 
        }
       </script>
</body>
</html>
