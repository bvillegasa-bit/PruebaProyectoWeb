<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Canjea tus productos ecolÃ³gicos en EcoMarket">
    <meta name="author" content="Victoria Barrios, Natalia Mercado, BernabÃ© Villegas">
    <title>EcoMarket - Canjea tus productos</title>
    <link rel="stylesheet" href="../css/Style.css">
    <link rel="stylesheet" href="../css/canje.css">
    <link rel="icon" type="image/png" href="../recursos/img/Logo.png">
    <script src="../js/canje.js"></script>
    <script src="../js/gestionarCanje.js"></script>
    <script src="../js/utilidades.js"></script>
    <script src="../js/gestionarProducto.js"></script>
    <script src="../js/producto.js"></script>
    <script src="../js/gestionarUsuario.js"></script>
    <script src="../js/usuario.js"></script>
</head>

<body>

<div class="header">
    <div class="logo">ðŸŒ¿ EcoMarket</div>
    <div class="navbar">
        <a href="./vistaUsuario.html" class="active">Inicio</a>
        <a href="./gestionCarrito.html">Comprar</a>
        <a href="./buscarProductos.html">Buscar Productos</a>
        <a href="./canjearProductos.html">Canjear Productos</a>
        <a href="../index.html">Cerrar SesiÃ³n</a>
    </div>
</div>

<div class="container-canje">

    <section class="banner-canje">
        <div class="banner-img"></div>

        <div class="banner-info">
            <h1>Â¡Canjea Ya!</h1>
            <p>
                Convierte tus puntos ecolÃ³gicos en productos sostenibles.  
                Entre mÃ¡s recicles, mÃ¡s ganas. Â¡Aprovecha tus beneficios!
            </p>
        </div>
    </section>

    <h2 class="titulo-central">Â¡AnÃ­mate a canjear!</h2>

    <div class="form-canje">

        <div class="columna-1">

            <label>Consulta tus puntos:</label>
            <div class="flex">
                <input type="text" id="apellido" placeholder="Ingrese sus apellidos">
            <button class="btn-consultar" onclick="consultarPuntos()">Consultar</button>
            </div>

            <label>CÃ³digo de usuario:</label>
            <input type="text" id="codigoUsuario">

            <label>CÃ³digo de canje:</label>
            <input type="text" id="codigoCanje">


            <button class="btn-canjear" onclick="canjearProducto()">Canjear</button>
            <button class="btn-limpiar" onclick="limpiarFormularioCanje()">Limpiar</button>
        </div>

        <div class="columna-2">

            <label>Productos disponibles</label>
            <select id="productos">
                <option value="">Seleccione</option>
            </select>

            <div class="producto-img">
                <img id="imagenProductoCanje" src="" alt="Imagen del producto">
            </div>
            <label>Resultado:</label>
            <input id="resultado" type="text"  style="width:500px; height:300px;" disabled >
            
        </div>

    </div>
</div>

<div class="footer">
    <div class="footer-logo">ðŸŒ¿</div>

    <div class="footer-menu">
        <a href="../index.html">Home</a>
    </div>

    <div class="footer-social">
        <img src="https://upload.wikimedia.org/wikipedia/commons/0/05/Facebook_Logo_%282019%29.png">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6f/Logo_of_Twitter.svg">
    </div>

    <div class="footer-bottom">
        <p>Â© 2025 EcoMarket</p>
        <div class="links">
            <a href="#">TÃ©rminos</a> |
            <a href="#">Privacidad</a>
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        cargarProductosCanje()
        document.getElementById('imagenProductoCanje').src = '../recursos/img/imagen 1.jpeg'
        document.getElementById('imagenProductoCanje').style.width = '200px'
        document.getElementById('imagenProductoCanje').style.height = '200px'
    })  

   function cargarProductosCanje() {
         const productos = cargarProductos()  
        const selectProductos = document.getElementById('productos')  

        productos.forEach(producto => {
            const option = document.createElement('option')  
            option.value = producto.idProducto  
            option.textContent = producto.nombreProducto  
            selectProductos.appendChild(option)  
        })  

        selectProductos.addEventListener('change', function() {
            const productoSeleccionado = productos.find(p => p.idProducto === this.value)  
            if (productoSeleccionado) {
                document.getElementById('imagenProductoCanje').src = productoSeleccionado.imagenProducto  
                document.getElementById('imagenProductoCanje').alt = productoSeleccionado.nombreProducto  
                document.getElementById('imagenProductoCanje').style.width = '200px'  
                document.getElementById('imagenProductoCanje').style.height = '200px'  
                
            } else {
                document.getElementById('imagenProductoCanje').src = '../recursos/img/imagen 1.jpeg'  
                document.getElementById('imagenProductoCanje').style.width = '200px'  
                document.getElementById('imagenProductoCanje').style.height = '200px'  
            }
        })  
    }
</script>

</body>
</html>
